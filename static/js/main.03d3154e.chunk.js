(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(2),o=a.n(c),r=(a(16),a(3)),l=a(4),i=a(8),d=a(5),m=a(9);a(17);var u=function(){return s.a.createElement("div",{className:"loading"},s.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")),s.a.createElement("small",{className:"text-muted"},"Fetching data from server"))},p=a(7);var h=function(e){return s.a.createElement("div",{id:e.chartid,className:"chart hide"},s.a.createElement("canvas",{height:"200",width:"200",style:{border:"solid 1px #dee2e6"}}))},f=a(6),E=a.n(f);var g=function(e){var t=e.stock,a=t.symbol,n=t.price,c=e.justUpdated,o=!1,r=!1,l=parseFloat(n.slice(-1)-n.slice(-2,-1)).toFixed(2);n.length>1&&(o=l>0&&c,r=l<0&&c);var i=function(){var e=document.getElementById(a).childNodes[0];e.parentElement.classList.contains("hide")?(Array.from(document.getElementsByClassName("chart")).forEach(function(e){e.classList.add("hide")}),function(e){e.height=200,e.width=200;var t={labels:["","","","",""],datasets:[{label:a.toUpperCase(),data:Object(p.a)(n).reverse().slice(0,5).reverse(),backgroundColor:o?"green":r?"red":"blue",borderColor:o?"lightgreen":r?"lightred":"lightblue",fill:!1,lineTension:0,radius:5}]};new E.a(e,{type:"line",data:t,options:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,position:"top",text:"Stock Performance",fontSize:14,fontColor:"#111"}}})}(e),document.getElementById(a).classList.remove("hide")):Array.from(document.getElementsByClassName("chart")).forEach(function(e){e.classList.add("hide")})};return s.a.createElement("tr",null,s.a.createElement("td",null,a.toUpperCase()),s.a.createElement("td",{className:o?"green":r?"red":""},"$ ",n.slice(-1),o&&s.a.createElement("i",{className:"fas fa-caret-up"}),o&&s.a.createElement("span",null," (+",l,") "),r&&s.a.createElement("i",{className:"fas fa-caret-down"}),r&&s.a.createElement("span",null," (",l,") ")),s.a.createElement("td",{className:"text-secondary"},c?s.a.createElement("p",null,"Just Now"):s.a.createElement("p",null,e.stock.time)),s.a.createElement("td",{className:"show-chart"},s.a.createElement("span",{onMouseEnter:function(){i()},onMouseLeave:function(){i()}},s.a.createElement("i",{className:"fas fa-chart-line"})),s.a.createElement(h,{chartid:a})))};var k=function(e){var t=Array.from(e.stockMap.entries()).map(function(t){return{ticker:t[0],value:t[1],justUpdated:-1!==e.justUpdatedStocks.indexOf(t[0]),timeDiff:Date.now()-t[1].date}});return t=t.sort(function(e,t){return e.ticker<t.ticker?-1:1}),s.a.createElement("table",{className:"table table-sm table-bordered\t",style:{textAlign:"center"}},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",null,"Ticker"),s.a.createElement("th",null,"Price"),s.a.createElement("th",null,"Last Updated"),s.a.createElement("th",{className:"mobile-hide"},"Show Graph"))),s.a.createElement("tbody",null,t.map(function(e){return s.a.createElement(g,{key:e.value.symbol,stock:e.value,justUpdated:e.justUpdated,timeDiff:e.timeDiff})})))},v=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={loadingFeed:!0,connected:!1,stockMap:new Map,justUpdatedStocks:[]},a.componentDidMount=function(){var e=new WebSocket("ws://stocks.mnet.website");e.onopen=a.socketOpened,e.onclose=a.socketClosed,e.onmessage=function(e){var t=JSON.parse(e.data),n=a.state.stockMap,s=[];t.forEach(function(e){var t=e[0];s.push(t);var c=parseFloat(e[1]).toFixed(3),o=new Date,r=o.getHours()>=12?o.getHours()-12:o.getHours(),l=o.getHours()>=12?" pm":" am";if(o="".concat(r.toString().padStart(2,"0"),":").concat(o.getMinutes().toString().padStart(2,"0"),":").concat(o.getSeconds().toString().padStart(2,"0")," ").concat(l),a.state.stockMap.has(t)){var i=n.get(t);i.price.push(c),i.time=o,i.date=Date.now()}else n.set(t,{symbol:t,price:[c],time:o,date:Date.now()})}),a.setState({stockMap:n,justUpdatedStocks:s})}},a.socketOpened=function(){console.log("WebSocket connection is open now."),a.setState({loadingFeed:!1,connected:!0})},a.socketClosed=function(){console.log("WebSocket connection is Closed."),a.setState({connected:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("main",{role:"main",className:"flex-shrink-0"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"mt-5"},"Live Stock Feed ",s.a.createElement("i",{className:"fas fa-chart-line"})),s.a.createElement("div",{style:{position:"relative"}},this.state.connected?s.a.createElement("span",{className:"badge badge-success"},"Connected"):s.a.createElement("span",{className:"badge badge-danger"},"Disconnected"),s.a.createElement("p",{className:"lead"},"Watch the Stock prices update in Real Time"),this.state.loadingFeed||0===this.state.stockMap.size?s.a.createElement(u,null):s.a.createElement(k,{stockMap:this.state.stockMap,justUpdatedStocks:this.state.justUpdatedStocks})))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.03d3154e.chunk.js.map