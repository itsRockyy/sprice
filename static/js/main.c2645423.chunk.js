(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(2),r=a.n(s),o=(a(16),a(3)),l=a(4),i=a(8),d=a(5),m=a(9);a(17);var u=function(){return c.a.createElement("div",{className:"loading"},c.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),c.a.createElement("small",{className:"text-muted"},"Fetching data from server"))},p=a(7);var h=function(e){return c.a.createElement("div",{id:e.chartid,className:"chart hide"},c.a.createElement("canvas",{height:"200",width:"200",style:{border:"solid 1px #dee2e6"}}))},f=a(6),E=a.n(f);var g=function(e){var t=e.stock,a=t.symbol,n=t.price,s=e.justUpdated,r=!1,o=!1,l=!1,i=parseFloat(n.slice(-1)-n.slice(-2,-1)).toFixed(2);n.length>1&&(r=i>0&&s,o=i<0&&s,l=0===i&&s);var d=function(){var e=document.getElementById(a).childNodes[0];e.parentElement.classList.contains("hide")?(Array.from(document.getElementsByClassName("chart")).forEach(function(e){e.classList.add("hide")}),function(e){e.height=200,e.width=200;var t={labels:["","","","",""],datasets:[{label:a.toUpperCase(),data:Object(p.a)(n).reverse().slice(0,5).reverse(),backgroundColor:r?"green":o?"red":"blue",borderColor:r?"lightgreen":o?"lightred":"lightblue",fill:!1,lineTension:0,radius:5}]};new E.a(e,{type:"line",data:t,options:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,position:"top",text:"Stock Performance",fontSize:14,fontColor:"#111"}}})}(e),document.getElementById(a).classList.remove("hide")):Array.from(document.getElementsByClassName("chart")).forEach(function(e){e.classList.add("hide")})};return c.a.createElement("tr",null,c.a.createElement("td",null,a.toUpperCase()),c.a.createElement("td",{className:r?"green":o?"red":""},"$ ",n.slice(-1),r&&c.a.createElement("i",{className:"fas fa-caret-up"}),r&&c.a.createElement("span",null," (+",i,") "),o&&c.a.createElement("i",{className:"fas fa-caret-down"}),o&&c.a.createElement("span",null," (",i,") "),l&&c.a.createElement("i",{className:"fas fa-caret-left"}),l&&c.a.createElement("i",{className:"fas fa-caret-right"})),c.a.createElement("td",{className:"text-secondary"},s?c.a.createElement("p",null,"Just Now"):c.a.createElement("p",null,e.stock.time)),c.a.createElement("td",{className:"show-chart"},c.a.createElement("span",{onClick:function(){d()}},"Show Graph"),c.a.createElement(h,{chartid:a})))};var k=function(e){var t=Array.from(e.stockMap.entries()).map(function(t){return{ticker:t[0],value:t[1],justUpdated:-1!==e.justUpdatedStocks.indexOf(t[0]),timeDiff:Date.now()-t[1].date}});return t=t.sort(function(e,t){return e.ticker<t.ticker?-1:1}),c.a.createElement("table",{className:"table table-sm table-bordered\t",style:{textAlign:"center"}},c.a.createElement("thead",{className:"thead-dark"},c.a.createElement("tr",null,c.a.createElement("th",null,"Ticker"),c.a.createElement("th",null,"Price"),c.a.createElement("th",null,"Last Updated"),c.a.createElement("th",{class:"mobile-hide"},"Show Graph"))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement(g,{key:e.value.symbol,stock:e.value,justUpdated:e.justUpdated,timeDiff:e.timeDiff})})))},v=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={loadingFeed:!0,connected:!1,stockMap:new Map,justUpdatedStocks:[]},a.componentDidMount=function(){var e=new WebSocket("ws://stocks.mnet.website");e.onopen=a.socketOpened,e.onclose=a.socketClosed;var t=5;e.onmessage=function(n){0===--t&&e.close();var c=JSON.parse(n.data),s=a.state.stockMap,r=[];c.forEach(function(e){var t=e[0];r.push(t);var n=parseFloat(e[1]).toFixed(3),c=new Date,o=c.getHours()>=12?c.getHours()-12:c.getHours(),l=c.getHours()>=12?" pm":" am";if(c="".concat(o.toString().padStart(2,"0"),":").concat(c.getMinutes().toString().padStart(2,"0"),":").concat(c.getSeconds().toString().padStart(2,"0")," ").concat(l),a.state.stockMap.has(t)){var i=s.get(t);i.price.push(n),i.time=c,i.date=Date.now()}else s.set(t,{symbol:t,price:[n],time:c,date:Date.now()})}),a.setState({stockMap:s,justUpdatedStocks:r})}},a.socketOpened=function(){console.log("WebSocket connection is open now."),a.setState({loadingFeed:!1,connected:!0})},a.socketClosed=function(){console.log("WebSocket connection is Closed."),a.setState({connected:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("main",{role:"main",className:"flex-shrink-0"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"mt-5"},"Live Stock Feed ",c.a.createElement("i",{className:"fas fa-chart-line"})),c.a.createElement("div",{style:{position:"relative"}},this.state.connected?c.a.createElement("span",{className:"badge badge-success"},"Connected"):c.a.createElement("span",{className:"badge badge-danger"},"Disconnected"),c.a.createElement("p",{className:"lead"},"Watch the Stock prices update in Real Time"),this.state.loadingFeed||0===this.state.stockMap.size?c.a.createElement(u,null):c.a.createElement(k,{stockMap:this.state.stockMap,justUpdatedStocks:this.state.justUpdatedStocks})))))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.c2645423.chunk.js.map