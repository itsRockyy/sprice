(this.webpackJsonpsprice=this.webpackJsonpsprice||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(2),r=a.n(c),o=(a(14),a(3)),l=a(4),i=a(8),d=a(6);a(15);var m=function(){return s.a.createElement("div",{className:"loading"},s.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")),s.a.createElement("small",{className:"text-muted"},"Fetching data from server"))},u=a(7);var p=function(e){return s.a.createElement("div",{id:e.chartid,className:"chart hide"},s.a.createElement("canvas",{height:"200",width:"200",style:{border:"solid 1px #dee2e6"}}))},h=a(5),f=a.n(h);var E=function(e){var t=e.stock,a=t.symbol,n=t.price,c=e.justUpdated,r=!1,o=!1,l=parseFloat(n.slice(-1)-n.slice(-2,-1)).toFixed(2);n.length>1&&(r=l>0&&c,o=l<0&&c);var i=function(){var e=document.getElementById(a).childNodes[0];e.parentElement.classList.contains("hide")?(Array.from(document.getElementsByClassName("chart")).forEach((function(e){e.classList.add("hide")})),function(e){e.height=200,e.width=200;var t={labels:["","","","",""],datasets:[{label:a.toUpperCase(),data:Object(u.a)(n).reverse().slice(0,5).reverse(),backgroundColor:r?"green":o?"red":"blue",borderColor:r?"lightgreen":o?"lightred":"lightblue",fill:!1,lineTension:0,radius:5}]};new f.a(e,{type:"line",data:t,options:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,position:"top",text:"Stock Performance",fontSize:14,fontColor:"#111"}}})}(e),document.getElementById(a).classList.remove("hide")):Array.from(document.getElementsByClassName("chart")).forEach((function(e){e.classList.add("hide")}))};return s.a.createElement("tr",null,s.a.createElement("td",null,a.toUpperCase()),s.a.createElement("td",{className:r?"green":o?"red":""},"$ ",n.slice(-1),r&&s.a.createElement("i",{className:"fas fa-caret-up"}),r&&s.a.createElement("span",null," (+",l,") "),o&&s.a.createElement("i",{className:"fas fa-caret-down"}),o&&s.a.createElement("span",null," (",l,") ")),s.a.createElement("td",{className:"text-secondary"},c?s.a.createElement("p",null,"Just Now"):s.a.createElement("p",null,e.stock.time)),s.a.createElement("td",{className:"show-chart"},s.a.createElement("span",{onMouseEnter:function(){i()},onMouseLeave:function(){i()}},s.a.createElement("i",{className:"fas fa-chart-line"})),s.a.createElement(p,{chartid:a})))};var g=function(e){var t=Array.from(e.stockMap.entries()).map((function(t){return{ticker:t[0],value:t[1],justUpdated:-1!==e.justUpdatedStocks.indexOf(t[0]),timeDiff:Date.now()-t[1].date}}));return t=t.sort((function(e,t){return e.ticker<t.ticker?-1:1})),s.a.createElement("table",{className:"table table-sm table-bordered\t",style:{textAlign:"center"}},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",null,"Ticker"),s.a.createElement("th",null,"Price"),s.a.createElement("th",null,"Last Updated"),s.a.createElement("th",{className:"mobile-hide"},"Show Graph"))),s.a.createElement("tbody",null,t.map((function(e){return s.a.createElement(E,{key:e.value.symbol,stock:e.value,justUpdated:e.justUpdated,timeDiff:e.timeDiff})}))))},v=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={loadingFeed:!0,connected:!1,stockMap:new Map,justUpdatedStocks:[]},e.componentDidMount=function(){var t=new WebSocket("ws://stocks.mnet.website");t.onopen=e.socketOpened,t.onclose=e.socketClosed,t.onmessage=function(t){var a=JSON.parse(t.data),n=e.state.stockMap,s=[];a.forEach((function(t){var a=t[0];s.push(a);var c=parseFloat(t[1]).toFixed(3),r=new Date,o=r.getHours()>=12?r.getHours()-12:r.getHours(),l=r.getHours()>=12?" pm":" am";if(r="".concat(o.toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0")," ").concat(l),e.state.stockMap.has(a)){var i=n.get(a);i.price.push(c),i.time=r,i.date=Date.now()}else n.set(a,{symbol:a,price:[c],time:r,date:Date.now()})})),e.setState({stockMap:n,justUpdatedStocks:s})}},e.socketOpened=function(){console.log("WebSocket connection is open now."),e.setState({loadingFeed:!1,connected:!0})},e.socketClosed=function(){console.log("WebSocket connection is Closed."),e.setState({connected:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("main",{role:"main",className:"flex-shrink-0"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"mt-5"},"Live Stock Feed ",s.a.createElement("i",{className:"fas fa-chart-line"})),s.a.createElement("div",{style:{position:"relative"}},this.state.connected?s.a.createElement("span",{className:"badge badge-success"},"Connected"):s.a.createElement("span",{className:"badge badge-danger"},"Disconnected"),s.a.createElement("p",{className:"lead"},"Watch the Stock prices update in Real Time"),this.state.loadingFeed||0===this.state.stockMap.size?s.a.createElement(m,null):s.a.createElement(g,{stockMap:this.state.stockMap,justUpdatedStocks:this.state.justUpdatedStocks})))))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.07e4860d.chunk.js.map