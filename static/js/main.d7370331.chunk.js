(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(2),o=a.n(s),r=(a(14),a(3)),l=a(4),i=a(6),m=a(5),d=a(7);a(15);var u=function(){return c.a.createElement("div",{className:"loading"},c.a.createElement("div",{className:"spinner-grow text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),c.a.createElement("small",{className:"text-muted"},"Fetching data from server"))};var p=function(e){var t=e.stock,a=t.symbol,n=t.price,s=e.justUpdated,o=!1,r=!1,l=!1;if(n.length>1){var i=n.slice(-2,-1)-n.slice(-1);o=i<0&&s,r=i>0&&s,l=0===i&&s}return Math.round(e.timeDiff/1e3),console.log(e.timeDiff),c.a.createElement("tr",null,c.a.createElement("td",null,a.toUpperCase()),c.a.createElement("td",null,"$ ",n.slice(-1),o&&c.a.createElement("i",{className:"fas fa-caret-up"}),r&&c.a.createElement("i",{className:"fas fa-caret-down"}),l&&c.a.createElement("i",{className:"fas fa-caret-left"}),l&&c.a.createElement("i",{className:"fas fa-caret-right"})),c.a.createElement("td",null,s?c.a.createElement("p",null,"Just Now"):c.a.createElement("p",null,e.stock.time)))};var f=function(e){var t=Array.from(e.stockMap.entries()).map(function(t){return{ticker:t[0],value:t[1],justUpdated:-1!==e.justUpdatedStocks.indexOf(t[0]),timeDiff:Date.now()-t[1].date}});return t=t.sort(function(e,t){return e.ticker<t.ticker?-1:1}),c.a.createElement("table",{className:"table table-sm table-bordered\t",style:{textAlign:"center"}},c.a.createElement("thead",{className:"thead-dark"},c.a.createElement("tr",null,c.a.createElement("th",null,"Ticker"),c.a.createElement("th",null,"Price"),c.a.createElement("th",null,"Last Update"))),c.a.createElement("tbody",null,t.map(function(e){return c.a.createElement(p,{key:e.value.symbol,stock:e.value,justUpdated:e.justUpdated,timeDiff:e.timeDiff})})))},k=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={loadingFeed:!0,connected:!1,stockMap:new Map,justUpdatedStocks:[]},a.componentDidMount=function(){var e=new WebSocket("ws://stocks.mnet.website");e.onopen=a.socketOpened,e.onclose=a.socketClosed;var t=10;e.onmessage=function(n){0===--t&&e.close();var c=JSON.parse(n.data);console.log("stockUpdates",c);var s=a.state.stockMap,o=[];c.forEach(function(e){var t=e[0];o.push(t);var n=parseFloat(e[1]).toFixed(3),c=new Date,r=c.getHours()>=12?c.getHours()-12:c.getHours(),l=c.getHours()>=12?" pm":" am";if(c="".concat(r.toString().padStart(2,"0"),":").concat(c.getMinutes().toString().padStart(2,"0"),":").concat(c.getSeconds().toString().padStart(2,"0")," ").concat(l),a.state.stockMap.has(t)){var i=s.get(t);i.price.push(n),i.time=c,i.date=Date.now()}else s.set(t,{symbol:t,price:[n],time:c,date:Date.now()})}),a.setState({stockMap:s,justUpdatedStocks:o})}},a.socketOpened=function(){console.log("WebSocket connection is open now."),a.setState({loadingFeed:!1,connected:!0})},a.socketClosed=function(){console.log("WebSocket connection is Closed."),a.setState({connected:!1})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("main",{role:"main",className:"flex-shrink-0"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"mt-5"},"Live Stock Feed ",c.a.createElement("i",{className:"fas fa-chart-line"})),c.a.createElement("div",{style:{position:"relative"}},this.state.connected?c.a.createElement("span",{className:"badge badge-success"},"Connected"):c.a.createElement("span",{className:"badge badge-danger"},"Disconnected"),c.a.createElement("p",{className:"lead"},"Watch the Stock prices update in Real Time"),this.state.loadingFeed?c.a.createElement(u,null):c.a.createElement(f,{stockMap:this.state.stockMap,justUpdatedStocks:this.state.justUpdatedStocks})))))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.d7370331.chunk.js.map